Based on workshop: https://www.shawntabrizi.com/rust-state-machine/
